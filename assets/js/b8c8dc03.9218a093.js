"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[8016],{4543(e,n,r){r.d(n,{A:()=>I});var s=r(7140),t=r(3526),a=r(6388),i=r(2131),o=r(559),l=r(4431),c=r(1332),d=r(7341),u=r(7370);function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:r,default:s}})=>({value:e,label:n,attributes:r,default:s}))}(r);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function b({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const r=(0,o.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(t),(0,s.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}function f(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,a=p(e),[i,o]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!b({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a})),[c,d]=g({queryString:r,groupId:t}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,t]=(0,u.Dv)(n);return[r,(0,s.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),m=(()=>{const e=c??h;return b({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{m&&o(m)},[m]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!b({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),f(e)},[d,f,a]),tabValues:a}}var m=r(2301);const j="tabList_qp5C",x="tabItem_jIeC";var v=r(5656);function y({className:e,block:n,selectedValue:r,selectValue:s,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,t=o.indexOf(n),i=a[t].value;i!==r&&(l(n),s(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...s,className:(0,t.A)("tabs__item",x,s?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function w({lazy:e,children:n,selectedValue:r}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===r);return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function T(e){const n=f(e);return(0,v.jsxs)("div",{className:(0,t.A)(a.G.tabs.container,"tabs-container",j),children:[(0,v.jsx)(y,{...n,...e}),(0,v.jsx)(w,{...n,...e})]})}function I(e){const n=(0,m.A)();return(0,v.jsx)(T,{...e,children:h(e.children)},String(n))}},5764(e,n,r){r.d(n,{A:()=>i});r(7140);var s=r(3526);const t="tabItem_xbEB";var a=r(5656);function i({children:e,hidden:n,className:r}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.A)(t,r),hidden:n,children:e})}},6145(e,n,r){r.d(n,{R:()=>i,x:()=>o});var s=r(7140);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}},9722(e,n,r){r.r(n),r.d(n,{assets:()=>b,contentTitle:()=>p,default:()=>m,frontMatter:()=>h,metadata:()=>s,toc:()=>g});const s=JSON.parse('{"id":"usage/web-api","title":"HTTP API","description":"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.","source":"@site/../content/usage/web-api.mdx","sourceDirName":"usage","slug":"/usage/web-api","permalink":"/docs/usage/web-api","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/usage/web-api.mdx","tags":[],"version":"current","frontMatter":{"title":"HTTP API","description":"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.","keywords":["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},"sidebar":"docsSidebar","previous":{"title":"JSON Mode","permalink":"/docs/usage/json-api"},"next":{"title":"SDKs","permalink":"/docs/usage/sdks"}}');var t=r(5656),a=r(6145),i=r(7140),o=r(4543),l=r(5764),c=r(6263);const d={container:"container_gG7i",title:"title_cejj",searchContainer:"searchContainer_v2iw",searchInput:"searchInput_DzbU",tabContent:"tabContent_CReR",tabDescription:"tabDescription_ZFRT",operatorsList:"operatorsList_OglV",operatorItem:"operatorItem_rszP",operatorContent:"operatorContent_hG0S",operatorHeader:"operatorHeader_Lfg3",operatorUrl:"operatorUrl_RdjC",operatorType:"operatorType_Z0B2",aggregator:"aggregator_ONi6",publisher:"publisher_RPj3",operatorDetails:"operatorDetails_KTbk",operatorName:"operatorName_kaS_",operatorFlags:"operatorFlags_abjg",flag:"flag_HggW",positive:"positive_ySn8",negative:"negative_BVio",loading:"loading_iKth",error:"error_Sm3w",empty:"empty_WEGR"},u=()=>{const[e,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(!0),[a,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(""),b=(0,c.Ay)("/operators.json");(0,i.useEffect)(()=>{(async()=>{try{const e=await fetch(b);if(!e.ok)throw new Error("Failed to fetch operators data");const r=await e.json();n(r),s(!1)}catch(e){u(e instanceof Error?e.message:"Unknown error occurred"),s(!1)}})()},[]);const g=e=>{const n=[];return e.aggregators&&Object.entries(e.aggregators).forEach(([e,r])=>{n.push({url:e,operator:r.operator,cache:r.cache,functional:r.functional,type:"aggregator"})}),e.publishers&&Object.entries(e.publishers).forEach(([e,r])=>{n.push({url:e,operator:r.operator,cache:r.cache,functional:r.functional,type:"publisher"})}),n.sort((e,n)=>e.operator.localeCompare(n.operator))},f=(e,n)=>{if(!n.trim())return e;const r=n.toLowerCase();return e.filter(e=>e.operator.toLowerCase().includes(r)||e.url.toLowerCase().includes(r)||e.type.toLowerCase().includes(r))},m=(0,i.useMemo)(()=>e?g(e.mainnet):[],[e]),j=(0,i.useMemo)(()=>e?g(e.testnet):[],[e]),x=(0,i.useMemo)(()=>f(m,h),[m,h]),v=(0,i.useMemo)(()=>f(j,h),[j,h]),y=e=>0===e.length?(0,t.jsx)("div",{className:d.empty,children:h?"No operators match your search criteria":"No operators available"}):(0,t.jsx)("ul",{className:d.operatorsList,children:e.map(e=>(0,t.jsx)("li",{className:d.operatorItem,children:(0,t.jsxs)("div",{className:d.operatorContent,children:[(0,t.jsxs)("div",{className:d.operatorHeader,children:[(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:d.operatorUrl,children:e.url}),(0,t.jsx)("span",{className:`${d.operatorType} ${d[e.type]}`,children:e.type})]}),(0,t.jsxs)("div",{className:d.operatorDetails,children:[(0,t.jsxs)("span",{className:d.operatorName,children:["Operated by: ",e.operator]}),(0,t.jsxs)("div",{className:d.operatorFlags,children:[void 0!==e.cache&&(0,t.jsxs)("span",{className:`${d.flag} ${e.cache?d.positive:d.negative}`,children:["Cache: ",e.cache?"Yes":"No"]}),void 0!==e.functional&&(0,t.jsxs)("span",{className:`${d.flag} ${e.functional?d.positive:d.negative}`,children:["Functional: ",e.functional?"Yes":"No"]})]})]})]})},e.url))});return r?(0,t.jsx)("div",{className:d.loading,children:"Loading operators..."}):a?(0,t.jsxs)("div",{className:d.error,children:["Error: ",a]}):(0,t.jsxs)("div",{className:d.container,children:[(0,t.jsx)("h3",{className:d.title,children:"Walrus Operators"}),(0,t.jsx)("div",{className:d.searchContainer,children:(0,t.jsx)("input",{type:"text",placeholder:"Search by operator name, URL, or type...",value:h,onChange:e=>p(e.target.value),className:d.searchInput})}),(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{value:"mainnet",label:"Mainnet",default:!0,children:(0,t.jsxs)("div",{className:d.tabContent,children:[(0,t.jsxs)("p",{className:d.tabDescription,children:["Mainnet operators (",x.length," results)"]}),y(x)]})}),(0,t.jsx)(l.A,{value:"testnet",label:"Testnet",children:(0,t.jsxs)("div",{className:d.tabContent,children:[(0,t.jsxs)("p",{className:d.tabDescription,children:["Testnet operators (",v.length," results)"]}),y(v)]})})]})]})},h={title:"HTTP API",description:"Learn how to use the Walrus HTTP API for public services, store and read operations, and quilt management.",keywords:["walrus","http api","daemon mode","aggregator","publisher","rest api","web service","public services","quilt api"]},p=void 0,b={},g=[{value:"Store",id:"store",level:2},{value:"Read",id:"read",level:2},{value:"Blob IDs",id:"blob-ids",level:3},{value:"Object ID",id:"object-id",level:3},{value:"Consistency checks",id:"consistency-checks",level:3},{value:"Quilt HTTP APIs",id:"quilt-http-apis",level:2},{value:"Storing quilts",id:"storing-quilts",level:3},{value:"Reading quilts",id:"reading-quilts",level:3},{value:"Quilt patch ID",id:"quilt-patch-id",level:5},{value:"Quilt ID and identifier",id:"quilt-id-and-identifier",level:5},{value:"Using a public aggregator or publisher",id:"public-services",level:2},{value:"Aggregators and publishers list",id:"agg-list",level:3}];function f(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h5:"h5",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Term:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(r,{lookup:"Client",children:"Walrus client"})," offers a daemon mode that runs a simple web server that provides HTTP interfaces you can use to store and read ",(0,t.jsx)(r,{lookup:"Blob",children:"blobs"})," in an ",(0,t.jsx)(n.a,{href:"/docs/operator-guide/aggregator",children:"aggregator"})," or ",(0,t.jsx)(n.a,{href:"/docs/operator-guide/aggregator",children:"publisher"})," role respectively. Walrus also offers HTTP APIs through ",(0,t.jsx)(n.a,{href:"#public-services",children:"public aggregator and publisher services"})," that you can use without running a local ","client","."]}),"\n",(0,t.jsxs)(n.p,{children:["For the following examples, set the ",(0,t.jsx)(n.code,{children:"AGGREGATOR"})," and ",(0,t.jsx)(n.code,{children:"PUBLISHER"})," environment variables to your desired ",(0,t.jsx)(r,{lookup:"Aggregator",children:"aggregator"})," and ",(0,t.jsx)(r,{lookup:"Publisher",children:"publisher"}),", respectively. For example, set these variables to ","aggregator"," and ","publisher"," instances run by Walrus on Walrus Testnet:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ AGGREGATOR=https://aggregator.walrus-testnet.walrus.space\n$ PUBLISHER=https://publisher.walrus-testnet.walrus.space\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Walrus aggregators and publishers expose their API specifications at the path ",(0,t.jsx)(n.code,{children:"/v1/api"}),". View this path in a browser, for example, at ",(0,t.jsx)(n.a,{href:"https://aggregator.walrus-testnet.walrus.space/v1/api",children:"https://aggregator.walrus-testnet.walrus.space/v1/api"}),". The latest version of these specifications is available ",(0,t.jsx)(n.a,{href:"https://github.com/MystenLabs/walrus/tree/main/crates/walrus-service",children:"on GitHub"})," in HTML and YAML format."]}),"\n",(0,t.jsx)(n.h2,{id:"store",children:"Store"}),"\n",(0,t.jsxs)(n.p,{children:["You can store data using HTTP PUT requests. For example, with ",(0,t.jsx)(n.a,{href:"https://curl.se",children:"cURL"}),", you can store ","blobs"," using a ","publisher",":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store the string `some string` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some string"\n# Store file `some/file` for 1 storage epoch\n$ curl -X PUT "$PUBLISHER/v1/blobs" --upload-file "some/file"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Control how the new ","blob"," is created through a combination of several query parameters as documented in the ",(0,t.jsx)(n.a,{href:"#http-api-usage",children:"OpenAPI specification"}),". For example:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Specify the lifetime of the ","blob"," through the ",(0,t.jsx)(n.code,{children:"epochs"})," parameter. If the parameter is omitted, ","blobs"," are stored for 1 epoch."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` for 5 storage epochs\n$ curl -X PUT "$PUBLISHER/v1/blobs?epochs=5" --upload-file "some/file"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Specify whether a ","blob"," is stored as permanent or deletable through a query parameter ",(0,t.jsx)(n.code,{children:"permanent=true"})," or ",(0,t.jsx)(n.code,{children:"deletable=true"}),", respectively:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` as a deletable blob:\n$ curl -X PUT "$PUBLISHER/v1/blobs?deletable=true" --upload-file "some/file"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` as a permanent blob:\n$ curl -X PUT "$PUBLISHER/v1/blobs?permanent=true" --upload-file "some/file"\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["Newly stored ","blobs"," are ",(0,t.jsx)(n.em,{children:"deletable"})," by default."]})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Specify an address to which the resulting ",(0,t.jsx)(n.code,{children:"Blob"})," object is sent using the ",(0,t.jsx)(n.code,{children:"send-object-to"})," parameter:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store file `some/file` and send the blob object to `$ADDRESS`:\n$ curl -X PUT "$PUBLISHER/v1/blobs?send_object_to=$ADDRESS" --upload-file "some/file"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The store HTTP API endpoints return information about stored ","blobs"," in JSON format. When a ","blob"," is stored for the first time, a ",(0,t.jsx)(n.code,{children:"newlyCreated"})," field contains information about it:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "$PUBLISHER/v1/blobs" -d "some other string"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["If successful, the console responds with the information stored in the content of the ","blob","'s corresponding ",(0,t.jsx)(n.a,{href:"/docs/dev-guide/sui-struct",children:"Sui object"}),".\n:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'{\n  "newlyCreated": {\n    "blobObject": {\n    "id": "0xe91eee8c5b6f35b9a250cfc29e30f0d9e5463a21fd8d1ddb0fc22d44db4eac50",\n    "registeredEpoch": 34,\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "size": 17,\n    "encodingType": "RS2",\n    "certifiedEpoch": 34,\n    "storage": {\n        "id": "0x4748cd83217b5ce7aa77e7f1ad6fc5f7f694e26a157381b9391ac65c47815faf",\n        "startEpoch": 34,\n        "endEpoch": 35,\n        "storageSize": 66034000\n    },\n    "deletable": false\n    },\n    "resourceOperation": {\n    "registerFromScratch": {\n        "encodedLength": 66034000,\n        "epochsAhead": 1\n    }\n    },\n    "cost": 132300\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["When the ","publisher"," finds a certified ","blob"," with the same ",(0,t.jsx)(r,{lookup:"Blob ID",children:"blob ID"})," and a sufficient validity period, it returns an ",(0,t.jsx)(n.code,{children:"alreadyCertified"})," JSON structure:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'{\n  "alreadyCertified": {\n    "blobId": "M4hsZGQ1oCktdzegB6HnI6Mi28S2nqOPHxK-W7_4BUk",\n    "event": {\n    "txDigest": "4XQHFa9S324wTzYHF3vsBSwpUZuLpmwTHYMFv9nsttSs",\n    "eventSeq": "0"\n    },\n    "endEpoch": 35\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The field ",(0,t.jsx)(n.code,{children:"event"})," returns the ",(0,t.jsx)(n.a,{href:"/docs/dev-guide/sui-struct",children:"Sui event ID"})," that can be used to find the object creation transaction using a ",(0,t.jsx)(n.a,{href:"https://suiscan.xyz/",children:"Sui Explorer"})," or using a ",(0,t.jsx)(n.a,{href:"https://docs.sui.io/references/sui-sdks",children:"Sui SDK"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"read",children:"Read"}),"\n",(0,t.jsxs)(n.p,{children:["You can read ","blobs"," using HTTP GET requests and their ","blob ID"," or object ID."]}),"\n",(0,t.jsxs)(n.h3,{id:"blob-ids",children:["Blob"," IDs"]}),"\n",(0,t.jsxs)(n.p,{children:["For example, the following cURL command reads a ","blob"," and writes it to an output file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/<some blob ID>" -o <some file name>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, you can print the contents of a ","blob"," in the terminal with the cURL command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/<some blob ID>"\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Modern browsers attempt to sniff the content type for such resources, and generally do a good job of inferring content types for media. However, the ","aggregator"," on purpose prevents such sniffing from inferring dangerous executable types such as JavaScript or style sheet types."]})}),"\n",(0,t.jsx)(n.h3,{id:"object-id",children:"Object ID"}),"\n",(0,t.jsxs)(n.p,{children:["You can also read ","blobs"," by using the object ID of a Sui ","blob"," object or a shared ","blob",". For example, the following cURL command downloads the ","blob"," corresponding to a Sui object ID:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl "$AGGREGATOR/v1/blobs/by-object-id/<object-id>" -o <some file name>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Downloading ","blobs"," by object ID allows setting some HTTP headers. The ","aggregator"," recognizes the following attribute keys and returns the values in the corresponding HTTP headers when present:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"content-disposition"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"content-encoding"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"content-language"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"content-location"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"content-type"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"link"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"consistency-checks",children:"Consistency checks"}),"\n",(0,t.jsxs)(n.p,{children:["The consistency checks performed by the ","aggregator"," are the same as the ones ",(0,t.jsx)(n.a,{href:"/docs/usage/client-cli#consistency-checks",children:"performed by the CLI"}),". For special use cases, the ",(0,t.jsx)(n.a,{href:"/docs/design/encoding",children:"strict consistency check"})," can be enabled by adding a query parameter ",(0,t.jsx)(n.code,{children:"strict_consistency_check=true"})," (starting with ",(0,t.jsx)(n.code,{children:"v1.35"}),"). If the writer of the ","blob"," is known and trusted, you can disable the consistency check by adding a query parameter ",(0,t.jsx)(n.code,{children:"skip_consistency_check=true"})," (starting with ",(0,t.jsx)(n.code,{children:"v1.36"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"quilt-http-apis",children:"Quilt HTTP APIs"}),"\n",(0,t.jsxs)(n.p,{children:["Walrus supports storing and retrieving multiple ","blobs"," as a single unit called a ",(0,t.jsx)(n.a,{href:"/docs/usage/quilt",children:"quilt"}),". Publishers and aggregators both support quilt operations."]}),"\n",(0,t.jsx)(n.h3,{id:"storing-quilts",children:"Storing quilts"}),"\n",(0,t.jsxs)(n.p,{children:["All query parameters available for ",(0,t.jsx)(n.a,{href:"#store",children:"storing regular blobs"})," can also be used when storing quilts."]}),"\n",(0,t.jsxs)(n.p,{children:["Use the following ","publisher"," API to store multiple ","blobs"," as a quilt."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store 2 files `document.pdf` and `image.png`, with custom identifiers `contract-v2` and `logo-2024`, respectively:\n$ curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \\\n  -F "contract-v2=@document.pdf" \\\n  -F "logo-2024=@image.png"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Identifiers must be unique within a quilt and cannot start with ",(0,t.jsx)(n.code,{children:"_"}),". The field name ",(0,t.jsx)(n.code,{children:"_metadata"})," is reserved for Walrus native metadata and does not conflict with ",(0,t.jsx)(r,{lookup:"User",children:"user"}),"-defined identifiers. See the ",(0,t.jsx)(n.a,{href:"/docs/usage/quilt",children:"Quilt documentation"})," for complete identifier restrictions."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Store 2 files with Walrus-native metadata. `_metadata` must be used as the field name for Walrus native metadata\n$ curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \\\n  -F "quilt-manual=@document.pdf" \\\n  -F "logo-2025=@image.png" \\\n  -F \'_metadata=[\n    {"identifier": "quilt-manual", "tags": {"creator": "walrus", "version": "1.0"}},\n    {"identifier": "logo-2025", "tags": {"type": "logo", "format": "png"}}\n  ]\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The quilt store API returns a JSON response with information about the stored quilt, including the quilt ID (",(0,t.jsx)(n.code,{children:"blobId"}),") and individual ","blob"," patch IDs that can be used to retrieve specific ","blobs"," later. The following example shows the command and response. The actual JSON output is returned as a single line and is formatted on this page for readability:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl -X PUT "http://127.0.0.1:31415/v1/quilts?epochs=1" \\\n  -F "walrus.jpg=@./walrus-33.jpg" \\\n  -F "another_walrus.jpg=@./walrus-46.jpg"\n'})}),"\n",(0,t.jsx)(n.p,{children:"If successful, the console responds:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'{\n  "blobStoreResult": {\n    "newlyCreated": {\n    "blobObject": {\n        "id": "0xe6ac1e1ac08a603aef73a34328b0b623ffba6be6586e159a1d79c5ef0357bc02",\n        "registeredEpoch": 103,\n        "blobId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo",\n        "size": 1782224,\n        "encodingType": "RS2",\n        "certifiedEpoch": null,\n        "storage": {\n        "id": "0xbc8ff9b4071927689d59468f887f94a4a503d9c6c5ef4c4d97fcb475a257758f",\n        "startEpoch": 103,\n        "endEpoch": 104,\n        "storageSize": 72040000\n        },\n        "deletable": false\n    },\n    "resourceOperation": {\n        "registerFromScratch": {\n        "encodedLength": 72040000,\n        "epochsAhead": 1\n        }\n    },\n    "cost": 12075000\n    }\n  },\n  "storedQuiltBlobs": [\n    {\n    "identifier": "another_walrus.jpg",\n    "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA"\n    },\n    {\n    "identifier": "walrus.jpg",\n    "quiltPatchId": "6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoB0AB7Ag"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"reading-quilts",children:"Reading quilts"}),"\n",(0,t.jsxs)(n.p,{children:["You can retrieve ","blobs"," from a quilt through the ","aggregator"," APIs using their quilt patch ID or their quilt ID and unique identifier. Currently, only 1 ","blob"," can be retrieved per request. Bulk retrieval of multiple ","blobs"," from a quilt in a single request is not yet supported."]}),"\n",(0,t.jsx)(n.h5,{id:"quilt-patch-id",children:"Quilt patch ID"}),"\n",(0,t.jsxs)(n.p,{children:["Each ","blob"," in a quilt has a unique patch ID. You can retrieve a specific ","blob"," using its patch ID."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Retrieve a blob using its quilt patch ID:\n$ curl "$AGGREGATOR/v1/blobs/by-quilt-patch-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKoBAQDQAA" \\\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You can obtain ",(0,t.jsx)(n.code,{children:"QuiltPatchIds"})," from the store quilt output or by using the ",(0,t.jsx)(n.a,{href:"/docs/usage/client-cli#batch-store",children:(0,t.jsx)(n.code,{children:"list-patches-in-quilt"})})," CLI command."]}),"\n",(0,t.jsx)(n.h5,{id:"quilt-id-and-identifier",children:"Quilt ID and identifier"}),"\n",(0,t.jsxs)(n.p,{children:["You can also retrieve a ","blob"," using the quilt ID and the ","blob","'s identifier."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'# Retrieve a blob with identifier `walrus.jpg` from the quilt:\n$ curl "$AGGREGATOR/v1/blobs/by-quilt-id/6XUOE-Q5-nAXHRifN6n9nomVDtHZQbGuAkW3PjlBuKo/walrus.jpg" \\\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Both methods return the raw ","blob"," bytes in the response body. Metadata such as the ","blob ID"," and tags are returned as HTTP headers:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"X-Quilt-Patch-Identifier"}),": The identifier of the ","blob"," within the quilt"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ETag"}),": The patch ID or quilt ID for caching purposes"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Additional custom headers from ","blob"," tags, if configured"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"public-services",children:["Using a public ","aggregator"," or ","publisher"]}),"\n",(0,t.jsxs)(n.p,{children:["On Walrus Testnet, many entities run public aggregators and publishers. On Mainnet, there are no public publishers without authentication, as they consume both SUI and ",(0,t.jsx)(r,{lookup:"WAL",children:"WAL"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"#agg-list",children:"aggregators and publishers list"})," for public services on Mainnet and Testnet. Walrus also provides the ",(0,t.jsx)(n.a,{href:"pathname:///operators.json",children:"operator lists in JSON format"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The operator list in JSON format includes additional info about aggregators, namely whether they are deployed with caching functionality and whether they are found to be functional. The list is updated once per week."}),"\n",(0,t.jsxs)(n.p,{children:["Most aggregators and publishers limit requests to 10 MB by default. If you want to upload larger files, you need to ",(0,t.jsx)(n.a,{href:"/docs/operator-guide/aggregator#local-daemon",children:"run your own publisher"})," or use the ",(0,t.jsx)(n.a,{href:"/docs/usage/client-cli",children:"CLI"}),"."]}),"\n","\n",(0,t.jsx)(n.h3,{id:"agg-list",children:"Aggregators and publishers list"}),"\n",(0,t.jsx)(u,{})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(f,{...e})}):f(e)}}}]);
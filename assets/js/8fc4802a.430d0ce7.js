"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[8699],{396(e,s,n){n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"usage/client-cli","title":"Using the Walrus Client","description":"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.","source":"@site/../content/usage/client-cli.mdx","sourceDirName":"usage","slug":"/usage/client-cli","permalink":"/docs/usage/client-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/usage/client-cli.mdx","tags":[],"version":"current","frontMatter":{"title":"Using the Walrus Client","description":"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.","keywords":["walrus","cli","client","command line","store","read","delete","extend","blob management","quilt","batch storage"]},"sidebar":"docsSidebar","previous":{"title":"Available Networks","permalink":"/docs/usage/networks"},"next":{"title":"JSON Mode","permalink":"/docs/usage/json-api"}}');var t=n(5656),o=n(6145);const a={title:"Using the Walrus Client",description:"Comprehensive guide to using the Walrus CLI for storing, reading, and managing blobs with detailed command examples.",keywords:["walrus","cli","client","command line","store","read","delete","extend","blob management","quilt","batch storage"]},l=void 0,r={},d=[{value:"View Walrus system information",id:"view-walrus-system-information",level:2},{value:"Store blobs",id:"store-blobs",level:2},{value:"Blob lifetimes",id:"blob-lifetimes",level:3},{value:"Blob permanence",id:"blob-permanence",level:3},{value:"Automatic optimizations",id:"automatic-optimizations",level:3},{value:"Use a Walrus upload relay",id:"use-a-walrus-upload-relay",level:3},{value:"Query blob status",id:"query-blob-status",level:2},{value:"Read blobs",id:"read-blobs",level:2},{value:"Check consistency",id:"check-consistency",level:3},{value:"Extend the lifetime of a blob",id:"extend-the-lifetime-of-a-blob",level:2},{value:"Reclaim space through deletable blobs",id:"reclaim-space-through-deletable-blobs",level:2},{value:"Shared blobs",id:"shared-blobs",level:2},{value:"Store blobs as a quilt",id:"store-blobs-as-a-quilt",level:2},{value:"Read blobs from a quilt",id:"read-blobs-from-a-quilt",level:3},{value:"Use Sui object and blob ID utilities",id:"use-sui-object-and-blob-id-utilities",level:2},{value:"Manage blob attributes",id:"manage-blob-attributes",level:2},{value:"Change the default configuration",id:"change-the-default-configuration",level:2},{value:"Configure logging and metrics",id:"configure-logging-and-metrics",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{ImportContent:n,Term:i}=s;return n||u("ImportContent",!0),i||u("Term",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["Use the command-line interface (CLI) to interact with the ",(0,t.jsx)(i,{lookup:"Client",children:"Walrus client"}),". The CLI is available through installing the ",(0,t.jsx)(s.code,{children:"walrus"})," binary. See the ",(0,t.jsx)(s.a,{href:"/docs/usage/started",children:"getting started documentation"})," for prerequisites, installation, and configuration."]}),"\n",(0,t.jsx)(s.p,{children:"Detailed usage information including a full list of available commands can be viewed using:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus --help\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Each subcommand of ",(0,t.jsx)(s.code,{children:"walrus"})," can also be called with ",(0,t.jsx)(s.code,{children:"--help"})," to print its specific arguments and their meaning."]}),"\n",(0,t.jsxs)(s.p,{children:["If you have multiple contexts in your configuration file, you can specify the context for each command using the ",(0,t.jsx)(s.code,{children:"--context"})," option. You can generate a ",(0,t.jsx)(s.code,{children:"bash"}),", ",(0,t.jsx)(s.code,{children:"zsh"}),", or ",(0,t.jsx)(s.code,{children:"fish"})," completion script with ",(0,t.jsx)(s.code,{children:"walrus completion"})," and place it in an appropriate directory like ",(0,t.jsx)(s.code,{children:"~/.local/share/bash-completion/completions"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"view-walrus-system-information",children:"View Walrus system information"}),"\n",(0,t.jsxs)(s.p,{children:["Information about the Walrus system is available through the ",(0,t.jsx)(s.code,{children:"walrus info"})," command. It provides an overview of current system parameters, such as the current epoch, the number of ",(0,t.jsx)(i,{lookup:"Storage node",children:"storage nodes"})," and shards in the system, the maximum ",(0,t.jsx)(i,{lookup:"Blob",children:"blob"})," size, and the current cost in ",(0,t.jsx)(i,{lookup:"WAL",children:"WAL"})," for storing ","blobs",":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus info\n"})}),"\n",(0,t.jsx)(s.p,{children:"The console responds:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"Walrus system information\n\nEpochs and storage duration\nCurrent epoch: 1\nStart time: 2025-03-25 15:00:24.408 UTC\nEnd time: 2025-04-08 15:00:24.408 UTC\nEpoch duration: 14days\nBlobs can be stored for at most 53 epochs in the future.\n\nStorage nodes\nNumber of storage nodes: 103\nNumber of shards: 1000\n\nBlob size\nMaximum blob size: 13.6 GiB (14,599,533,452 B)\nStorage unit: 1.00 MiB\n\nStorage prices per epoch\n(Conversion rate: 1 WAL = 1,000,000,000 FROST)\nPrice per encoded storage unit: 0.0001 WAL\nAdditional price for each write: 20,000 FROST\n\n...\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You can view additional information with various subcommands, including encoding parameters and sizes, BFT system information, and details about ","storage nodes"," in the current committee and next committee, if already selected. This information includes node IDs, stake distribution, and ",(0,t.jsx)(i,{lookup:"Shard",children:"shard"})," allocation. Run ",(0,t.jsx)(s.code,{children:"walrus info --help"})," for a complete list of available subcommands."]}),"\n",(0,t.jsxs)(s.p,{children:["The health of ","storage nodes"," can be checked with the ",(0,t.jsx)(s.code,{children:"walrus health"})," command. This command takes different options to select nodes to check, for example, ",(0,t.jsx)(s.code,{children:"walrus health --committee"})," checks the status of all current committee members."]}),"\n",(0,t.jsxs)(s.h2,{id:"store-blobs",children:["Store ","blobs"]}),"\n",(0,t.jsxs)(s.p,{children:["All ","blobs"," stored in Walrus are public and discoverable by all. To store sensitive data, use ",(0,t.jsx)(s.a,{href:"/docs/dev-guide/data-security#seal-data-confidentially-and-access-control",children:"Seal"})," or ",(0,t.jsx)(s.a,{href:"/docs/dev-guide/data-security#nautilus-secure-and-verifiable-off-chain-computation",children:"Nautilus"})," to encrypt the data before storing it on Walrus."]}),"\n",(0,t.jsxs)(s.p,{children:["Store ","blobs"," on Walrus with the following command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus store <FILES> --epochs <EPOCHS>\n"})}),"\n",(0,t.jsx)(n,{source:"blob-object-id.mdx",mode:"snippet"}),"\n",(0,t.jsxs)(s.p,{children:["You can store a single file or multiple files, separated by spaces. Notably, this is compatible with glob patterns; for example, ",(0,t.jsx)(s.code,{children:"walrus store *.png --epochs <EPOCHS>"})," stores all PNG files in the current directory."]}),"\n",(0,t.jsxs)(s.h3,{id:"blob-lifetimes",children:["Blob"," lifetimes"]}),"\n",(0,t.jsxs)(s.p,{children:["A mandatory CLI argument must be set to specify the lifetime for the ","blob",". There are currently 3 methods of setting a ","blob","'s lifetime:"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"--epochs <EPOCHS>"})," option indicates the number of epochs the ","blob"," should be stored for. There is an upper limit on the number of epochs a ","blob"," can be stored for, which is 53 and corresponds to 2 years. In addition to a positive integer, you can also use ",(0,t.jsx)(s.code,{children:"--epochs max"})," to store the ","blob"," for the maximum number of epochs. The end epoch is defined as the current epoch plus the specified number of epochs."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"--earliest-expiry-time <EARLIEST_EXPIRY_TIME>"})," option takes a date in either RFC3339 format (for example, ",(0,t.jsx)(s.code,{children:"2024-03-20T15:00:00Z"}),") or a more relaxed format (for example, ",(0,t.jsx)(s.code,{children:"2024-03-20 15:00:00"}),"). It ensures the ","blob"," expires after the specified date if possible."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"--end-epoch <END_EPOCH>"})," option takes a specific end epoch for the ","blob","."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["A ","blob"," expires at the beginning of its end epoch. For example, a ","blob"," with end epoch ",(0,t.jsx)(s.code,{children:"314"})," becomes unavailable at the beginning of epoch ",(0,t.jsx)(s.code,{children:"314"}),". One consequence of this is that when storing a ","blob"," with ",(0,t.jsx)(s.code,{children:"--epochs 1"})," immediately before an epoch change, it expires and becomes unavailable almost immediately. ","Blobs"," can be ",(0,t.jsx)(s.a,{href:"#extend-the-lifetime-of-a-blob",children:"extended"})," only if they have not expired."]}),"\n",(0,t.jsxs)(s.h3,{id:"blob-permanence",children:["Blob"," permanence"]}),"\n",(0,t.jsxs)(s.p,{children:["You can specify whether a newly stored ","blob"," is deletable or permanent through the ",(0,t.jsx)(s.code,{children:"--deletable"})," and ",(0,t.jsx)(s.code,{children:"--permanent"})," option, respectively:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(i,{lookup:"Permanent blob",children:"permanent blob"})," remains available until its ",(0,t.jsx)(i,{lookup:"Expiry",children:"expiry"})," epoch. Not even the uploader can delete it beforehand."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In contrast, a ",(0,t.jsx)(i,{lookup:"Deletable blob",children:"deletable blob"})," can be deleted at any point during its lifetime by the owner of the corresponding Sui object. See the ",(0,t.jsx)(s.a,{href:"#reclaim-space-through-deletable-blobs",children:"deletable blobs"})," for more details."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Newly stored ","blobs"," are deletable by default."]}),"\n",(0,t.jsx)(s.h3,{id:"automatic-optimizations",children:"Automatic optimizations"}),"\n",(0,t.jsxs)(s.p,{children:["When storing a ","blob",", the ","client"," performs a number of automatic optimizations, including the following:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If the ","blob"," is already stored as a ","permanent blob"," on Walrus for a sufficient number of epochs, the command does not store it again. This behavior can be overwritten with the ",(0,t.jsx)(s.code,{children:"--force"})," CLI option, which stores the ","blob"," again and creates a fresh Sui object belonging to the wallet address."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If the ",(0,t.jsx)(i,{lookup:"User",children:"user"}),"'s wallet has a storage resource of suitable size and duration, it is used instead of requiring that the ","user"," buy a new one."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If the ","blob"," is already certified on Walrus but it is a ","deletable blob"," or it is not stored for a sufficient number of epochs, the command skips sending encoded ","blob"," data to the ","storage nodes"," and just collects the availability certificate."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"use-a-walrus-upload-relay",children:"Use a Walrus upload relay"}),"\n",(0,t.jsxs)(s.p,{children:["A Walrus upload relay is a third party service that can help clients with limited bandwidth and networking capabilities such as a browser, for example, in storing ","blobs"," on Walrus."]}),"\n",(0,t.jsxs)(s.p,{children:["Asset management on-chain still happens on the ","client",". The upload relay just takes the unencoded ","blob",", encodes it, and sends the slivers to the ","storage nodes",", before returning the certificate. See in-depth details in the ",(0,t.jsx)(s.a,{href:"/docs/operator-guide/upload-relay",children:"Walrus upload relay"})," documentation."]}),"\n",(0,t.jsxs)(s.p,{children:["When storing ","blobs"," with the ",(0,t.jsx)(s.code,{children:"walrus store"})," command, and also when ",(0,t.jsx)(s.a,{href:"#store-blobs-as-a-quilt",children:"storing quilts"}),", you can use the ",(0,t.jsx)(s.code,{children:"--upload-relay"})," flag with a URL to specify an upload relay server be used by the CLI."]}),"\n",(0,t.jsx)(s.p,{children:"The Walrus upload relay functionality is only available in the Walrus CLI version v1.29 or higher."}),"\n",(0,t.jsxs)(s.p,{children:["The upload relay is a third party service that might require a fee or tip. This tip might be a constant SUI amount per ","blob"," stored, or it might be dependent on the size of the ","blob"," being stored. The Walrus CLI shows you how much tip the upload relay requires and asks for confirmation before continuing."]}),"\n",(0,t.jsxs)(s.p,{children:["View technical details on how the tip is ",(0,t.jsx)(s.a,{href:"/docs/operator-guide/upload-relay",children:"computed and paid"}),"."]}),"\n",(0,t.jsxs)(s.h2,{id:"query-blob-status",children:["Query ","blob"," status"]}),"\n",(0,t.jsxs)(s.p,{children:["The status of a ","blob"," can be queried through one of the following commands:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus blob-status --blob-id <BLOB_ID>\n$ walrus blob-status --file <FILE>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Each command returns output that indicates whether the specified ","blob"," is stored and its ",(0,t.jsx)(i,{lookup:"Availability period",children:"availability period"}),". If you specify a file with the ",(0,t.jsx)(s.code,{children:"--file"})," option, the CLI re-encodes the content of the file and derives the ",(0,t.jsx)(i,{lookup:"Blob ID",children:"blob ID"})," before checking the status."]}),"\n",(0,t.jsxs)(s.p,{children:["When a ","blob"," is available, the ",(0,t.jsx)(s.code,{children:"blob-status"})," command also returns the ",(0,t.jsx)(s.code,{children:"BlobCertified"})," Sui event ID, which consists of a transaction ID and a sequence number in the events emitted by the transaction. The existence of this event certifies the availability of the ","blob","."]}),"\n",(0,t.jsxs)(s.h2,{id:"read-blobs",children:["Read ","blobs"]}),"\n",(0,t.jsxs)(s.p,{children:["Reading ","blobs"," from Walrus can be achieved using the following command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus read <some blob ID>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["By default, ","blob"," data is written to the standard output. The ",(0,t.jsx)(s.code,{children:"--out <OUT>"})," CLI option can be used to specify an output file name. The ",(0,t.jsx)(s.code,{children:"--rpc-url <URL>"})," can be used to specify a Sui RPC node to use instead of the currently configured RPC node set in the CLI configuration file or wallet configuration."]}),"\n",(0,t.jsx)(s.h3,{id:"check-consistency",children:"Check consistency"}),"\n",(0,t.jsxs)(s.p,{children:["Walrus performs integrity and consistency checks to ensure that any data read from Walrus is what the writer intended, and that the writer encoded the ","blob"," correctly. See the ",(0,t.jsx)(s.a,{href:"/docs/design/encoding",children:"data consistency"})," documentation for further details."]}),"\n",(0,t.jsxs)(s.p,{children:["Prior to ",(0,t.jsx)(s.code,{children:"v1.37"}),", the Walrus CLI and ",(0,t.jsx)(i,{lookup:"Aggregator",children:"aggregator"})," always performed the ",(0,t.jsx)(s.a,{href:"/docs/design/encoding",children:"strict consistency check"}),". Starting with ",(0,t.jsx)(s.code,{children:"v1.37"}),", the default is a ",(0,t.jsx)(s.a,{href:"/docs/design/encoding",children:"more performant consistency check"}),", which is sufficient for the majority of cases. The strict consistency check can be enabled through the flag ",(0,t.jsx)(s.code,{children:"--strict-consistency-check"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Consistency checks can be disabled completely with the flag ",(0,t.jsx)(s.code,{children:"--skip-consistency-check"}),". This should only be used if the writer of the ","blob"," is known and trusted."]}),"\n",(0,t.jsxs)(s.h2,{id:"extend-the-lifetime-of-a-blob",children:["Extend the lifetime of a ","blob"]}),"\n",(0,t.jsxs)(s.p,{children:["Walrus ","blob"," lifetimes can be extended using the ",(0,t.jsx)(s.code,{children:"walrus extend --blob-obj-id <Sui object id> ..."})," command as long as the ","blob"," is not expired. Both address owned ","blobs"," and ",(0,t.jsx)(s.a,{href:"#shared-blobs",children:"shared blobs"})," can have their lifetime extended. Shared ","blobs"," can be extended by anyone, but owned ","blobs"," can only be extended by their owner. When extending a shared ","blob",", you need to supply the ",(0,t.jsx)(s.code,{children:"--shared"})," flag to inform the command that the ","blob"," is shared."]}),"\n",(0,t.jsxs)(s.p,{children:["The ","blob","'s object ID is needed in order to extend it. The ","blob ID"," is not needed. See ",(0,t.jsx)(s.code,{children:"walrus extend --help"})," for more information on ","blob"," extension."]}),"\n",(0,t.jsxs)(s.h2,{id:"reclaim-space-through-deletable-blobs",children:["Reclaim space through deletable ","blobs"]}),"\n",(0,t.jsxs)(s.p,{children:["A ","blob"," that was set as deletable upon creation can be deleted before its ","expiry",", but only by the owner of the Sui object corresponding to the ","blob",". Deletable ","blobs"," are indicated as such in the Sui events that certify them, and should not be relied upon by others for availability."]}),"\n",(0,t.jsxs)(s.p,{children:["Delete a ","blob"," with the command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus delete --blob-id <BLOB_ID>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The delete command can also be invoked by specifying a ",(0,t.jsx)(s.code,{children:"--file <PATH>"})," option to derive the ","blob ID"," from a file, or using ",(0,t.jsx)(s.code,{children:"--object-id <SUI_ID>"}),". Before deleting a ","blob",", the ",(0,t.jsx)(s.code,{children:"walrus delete"})," command asks for confirmation unless the ",(0,t.jsx)(s.code,{children:"--yes"})," option is specified."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"delete"})," command reclaims the storage object associated with the deleted ","blob",", which is re-used to store new ","blobs"," automatically. The delete operation provides flexibility around managing ",(0,t.jsx)(s.a,{href:"/docs/dev-guide/costs",children:"storage costs"})," and re-using storage."]}),"\n",(0,t.jsxs)(s.p,{children:["The delete operation has limited utility for privacy. It only deletes slivers from the current epoch ","storage nodes",", and subsequent epoch ","storage nodes",", if no other ","user"," has uploaded a copy of the same ","blob",". If another copy of the same ","blob"," exists in Walrus, the delete operation does not make the ","blob"," unavailable for download, and ",(0,t.jsx)(s.code,{children:"walrus read"})," invocations will still download it. After the deletion is finished, the CLI checks the updated status of the ","blob"," to see if it is still accessible in Walrus, unless the ",(0,t.jsx)(s.code,{children:"--no-status-check"})," option was specified. However, even if the ","blob"," is not accessible, copies of the public ","blob"," might be cached or downloaded by users, and these copies are not deleted."]}),"\n",(0,t.jsx)(s.admonition,{type:"danger",children:(0,t.jsxs)(s.p,{children:["All ","blobs"," stored in Walrus are public and discoverable by all. The ",(0,t.jsx)(s.code,{children:"delete"})," command does not delete slivers if other copies of the ","blob"," are stored on Walrus, possibly by other users. It does not delete ","blobs"," from caches, slivers from past ","storage nodes",", or copies that could have been made by users before the ","blob"," was deleted."]})}),"\n",(0,t.jsxs)(s.h2,{id:"shared-blobs",children:["Shared ","blobs"]}),"\n",(0,t.jsxs)(s.p,{children:["Shared ","blobs"," are shared Sui objects wrapping standard ",(0,t.jsx)(s.code,{children:"Blob"})," objects that can be funded and whose lifetime can be extended by anyone. See the ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/shared_blob.move",children:"shared blobs contracts"})," for further details."]}),"\n",(0,t.jsxs)(s.p,{children:["You can create a shared ","blob"," from an existing ",(0,t.jsx)(s.code,{children:"Blob"})," object you own with the ",(0,t.jsx)(s.code,{children:"walrus share"})," command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus share --blob-obj-id <SUI_OBJ_ID>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The resulting shared ","blob"," can be directly funded by adding an ",(0,t.jsx)(s.code,{children:"--amount"}),", or you can fund an existing shared ","blob"," with the ",(0,t.jsx)(s.code,{children:"walrus fund-shared-blob"})," command. Additionally, you can immediately share a newly created ","blob"," by adding the ",(0,t.jsx)(s.code,{children:"--share"})," option to the ",(0,t.jsx)(s.code,{children:"walrus store"})," command."]}),"\n",(0,t.jsxs)(s.p,{children:["Shared ","blobs"," can only contain permanent ","blobs"," and as such cannot be deleted before their ","expiry","."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"#extend-the-lifetime-of-a-blob",children:"Learn more"})," about ","blob"," extension."]}),"\n",(0,t.jsxs)(s.h2,{id:"store-blobs-as-a-quilt",children:["Store ","blobs"," as a quilt"]}),"\n",(0,t.jsxs)(s.p,{children:["For efficiently storing large numbers of small ","blobs",", Walrus provides the Quilt. It batches multiple ","blobs"," into a single storage unit, significantly reducing overhead and cost. You can find a more detailed overview of the feature ",(0,t.jsx)(s.a,{href:"/docs/usage/quilt",children:"Quilt"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["You can interact with quilts using a dedicated set of ",(0,t.jsx)(s.code,{children:"walrus"})," subcommands."]}),"\n",(0,t.jsxs)(s.p,{children:["Blobs"," within a quilt are retrieved by a ",(0,t.jsx)(s.code,{children:"QuiltPatchId"}),", not their standard ",(0,t.jsx)(s.code,{children:"BlobId"}),". This ID is generated based on all ","blobs"," in the quilt, so a ","blob","'s ",(0,t.jsx)(s.code,{children:"QuiltPatchId"})," changes if it's moved to a different quilt."]}),"\n",(0,t.jsxs)(s.p,{children:["Standard ","blob"," operations like ",(0,t.jsx)(s.code,{children:"delete"}),", ",(0,t.jsx)(s.code,{children:"extend"}),", or ",(0,t.jsx)(s.code,{children:"share"})," cannot target individual ","blobs"," inside a quilt; they must be applied to the entire quilt."]}),"\n",(0,t.jsxs)(s.p,{children:["To store all files from one or more directories recursively, use the ",(0,t.jsx)(s.code,{children:"--paths"})," flag. The filename of each file is used as its unique identifier within the quilt. Regular expressions are supported for uploading from multiple paths."]}),"\n",(0,t.jsxs)(s.p,{children:["Like the regular ",(0,t.jsx)(s.code,{children:"store"})," command, you can specify the storage duration using ",(0,t.jsx)(s.code,{children:"--epochs"}),", ",(0,t.jsx)(s.code,{children:"--earliest-expiry-time"}),", or ",(0,t.jsx)(s.code,{children:"--end-epoch"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus store-quilt --epochs <EPOCHS> --paths <path-to-directory-1> <path-to-directory-2> <path-to-blob>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You must ensure that all the identifiers are unique within a quilt, the operation fails otherwise. Identifiers are the unique names used to retrieve individual ","blobs"," from within the quilt."]}),"\n",(0,t.jsxs)(s.p,{children:["To specify a list of ","blobs"," as JSON objects, use the ",(0,t.jsx)(s.code,{children:"--blobs"})," flag. This gives you more control, allowing you to set a custom ",(0,t.jsx)(s.code,{children:"identifier"})," and ",(0,t.jsx)(s.code,{children:"tags"})," for each file. If ",(0,t.jsx)(s.code,{children:"identifier"})," is ",(0,t.jsx)(s.code,{children:"null"})," or omitted, the file's name is used instead."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'$ walrus store-quilt \\\n    --blobs \'{"path":"<path-to-blob-1>","identifier":"walrus","tags":{"color":"grey","size":"medium"}}\' \\\n            \'{"path":"<path-to_blob-2>","identifier":"seal","tags":{"color":"grey","size":"small"}}\' \\\n    --epochs <EPOCHS>\n'})}),"\n",(0,t.jsxs)(s.h3,{id:"read-blobs-from-a-quilt",children:["Read ","blobs"," from a quilt"]}),"\n",(0,t.jsxs)(s.p,{children:["You can retrieve individual ","blobs"," from a quilt without downloading the entire quilt. The ",(0,t.jsx)(s.code,{children:"read-quilt"})," command allows you to query for specific ","blobs"," by their identifier, tags, or unique ","blob ID","."]}),"\n",(0,t.jsxs)(s.p,{children:["To read ","blobs"," by their identifiers, use the ",(0,t.jsx)(s.code,{children:"--identifiers"})," flag:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n    --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --identifiers walrus.jpg another-walrus.jpg\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Blobs"," within a quilt can be accessed and filtered based on their tags. For instance, if you have a collection of animal images stored in a quilt, each labeled with a species tag such as ",(0,t.jsx)(s.code,{children:"species=cat"}),", you can download all images labeled as cats with the following command:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n    --quilt-id 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik --tag species cat\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You can also read a ","blob"," using its ",(0,t.jsx)(s.code,{children:"QuiltPatchId"}),", which can be retrieved using ",(0,t.jsx)(s.code,{children:"walrus list-patches-in-quilt"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus read-quilt --out <download dir> \\\n  --quilt-patch-ids GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBuQG8AQ \\\n  GRSuRSQ_hLYR9nyo7mlBlS7MLQVSSXRrfPVOxF6n6XcBwgHHAQ\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To see all the patches contained within a quilt, along with their identifiers and ",(0,t.jsx)(s.code,{children:"QuiltPatchIds"}),", use the ",(0,t.jsx)(s.code,{children:"list-patches-in-quilt"})," command."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ walrus list-patches-in-quilt 057MX9PAaUIQLliItM_khR_cp5jPHzJWf-CuJr1z1ik\n"})}),"\n",(0,t.jsxs)(s.h2,{id:"use-sui-object-and-blob-id-utilities",children:["Use Sui object and ","blob ID"," utilities"]}),"\n",(0,t.jsxs)(s.p,{children:["The command ",(0,t.jsx)(s.code,{children:"walrus blob-id <FILE>"})," can be used to derive the ","blob ID"," of any file. The ","blob ID"," is a commitment to the file, and any ","blob"," with the same ID decodes to the same content. The ","blob ID"," is a 256 bit number and represented on some Sui explorers as a decimal large number. The command ",(0,t.jsx)(s.code,{children:"walrus convert-blob-id <BLOB_ID_DECIMAL>"})," can be used to convert it to a base64 URL to be used by the command line tools and other APIs."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"walrus list-blobs"})," command lists all non-expired Sui objects that the current account owns, including their ","blob ID",", object ID, and metadata about expiration and deletable status. The option ",(0,t.jsx)(s.code,{children:"--include-expired"})," also lists expired Sui objects."]}),"\n",(0,t.jsxs)(s.p,{children:["The Sui storage cost associated with Sui objects can be reclaimed by burning the Sui object. This does not lead to the Walrus ","blob"," being deleted, but means that operations such as extending its lifetime, deleting it, or modifying attributes are not available. The ",(0,t.jsx)(s.code,{children:"walrus burn-blobs --object-ids <SUI_OBJ_IDS>"})," command can be used to burn a specific list of Sui object IDs. The ",(0,t.jsx)(s.code,{children:"--all"})," flag burns the Sui objects for all ","blobs"," under the ","user"," account, and ",(0,t.jsx)(s.code,{children:"--all-expired"})," burns all expired ","blobs"," under the ","user"," account."]}),"\n",(0,t.jsxs)(s.h2,{id:"manage-blob-attributes",children:["Manage ","blob"," attributes"]}),"\n",(0,t.jsxs)(s.p,{children:["Walrus allows a set of key-value attribute pairs to be associated with a Sui object. While the keys and their values can be arbitrary strings to accommodate any needs, specific keys are converted to HTTP headers when serving ","blobs"," through aggregators. Each ","aggregator"," can decide which headers it allows through the ",(0,t.jsx)(s.code,{children:"--allowed-headers"})," CLI option. The defaults can be viewed through ",(0,t.jsx)(s.code,{children:"walrus aggregator --help"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["The following command sets attributes ",(0,t.jsx)(s.code,{children:"key1"})," and ",(0,t.jsx)(s.code,{children:"key2"})," to values ",(0,t.jsx)(s.code,{children:"value1"})," and ",(0,t.jsx)(s.code,{children:"value2"}),", respectively. The command ",(0,t.jsx)(s.code,{children:"walrus get-blob-attribute <SUI_OBJ_ID>"})," returns all attributes associated with a ","blob ID","."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'$ walrus set-blob-attribute <SUI_OBJ_ID> --attr "key1" "value1" --attr "key2" "value2"\n'})}),"\n",(0,t.jsxs)(s.p,{children:["The following command deletes the attributes with keys listed, separated by commas or spaces. All attributes of a Sui object can be deleted by the command ",(0,t.jsx)(s.code,{children:"walrus remove-blob-attribute <SUI_OBJ_ID>"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'$ walrus remove-blob-attribute-fields <SUI_OBJ_ID> --keys "key1,key2"\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Attributes are associated with Sui object IDs rather than the ","blob"," themselves on Walrus. This means that the gas for storage is reclaimed by deleting attributes and that the same ","blob"," contents can have different attributes for different Sui objects for the same ","blob ID","."]}),"\n",(0,t.jsx)(s.h2,{id:"change-the-default-configuration",children:"Change the default configuration"}),"\n",(0,t.jsxs)(s.p,{children:["Use the ",(0,t.jsx)(s.code,{children:"--config"})," option to specify a custom path to the ",(0,t.jsx)(s.a,{href:"/docs/usage/setup#configuration",children:"configuration location"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"--wallet <WALLET>"})," argument can be used to specify a non-standard Sui wallet configuration file and a ",(0,t.jsx)(s.code,{children:"--gas-budget <GAS_BUDGET>"})," argument can be used to change the maximum amount of Sui (in MIST) that the command is allowed to use."]}),"\n",(0,t.jsx)(s.h2,{id:"configure-logging-and-metrics",children:"Configure logging and metrics"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"walrus"})," CLI allows for multiple levels of logging, which can be turned on through an environment variable:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"$ RUST_LOG=walrus=trace walrus info\n"})}),"\n",(0,t.jsxs)(s.p,{children:["By default ",(0,t.jsx)(s.code,{children:"info"})," level logs are enabled, but ",(0,t.jsx)(s.code,{children:"debug"})," and ",(0,t.jsx)(s.code,{children:"trace"})," can give a more in depth understanding of what a command does or how it fails."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}function u(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},6145(e,s,n){n.d(s,{R:()=>a,x:()=>l});var i=n(7140);const t={},o=i.createContext(t);function a(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);